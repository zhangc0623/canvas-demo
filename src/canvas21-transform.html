<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas width="400" height="400" id="myCanvas" style="border: 1px solid red;"></canvas>
</body>
<script>
    let canvas = document.getElementById('myCanvas')
    let ctx = canvas.getContext('2d')
    let w = canvas.width - 20
    let h = canvas.width - 20

    ctx.fillStyle = 'red'
    let deg = 0
    ctx.translate(w / 2 + 10, h / 2 + 10)
    // for (let i = 0; i < 360; i++) {
    //     let arg = i * Math.PI / 180
    //     ctx.save()
    //     ctx.transform(Math.cos(arg), Math.sin(arg), -Math.sin(arg), Math.cos(arg), 0, 0)
    //     ctx.fillRect(w / 2, 0, 10, 10)
    //     ctx.restore()
    // }
    let draw = function () {
        let arg = deg * Math.PI / 180
        ctx.save()
        ctx.transform(Math.cos(arg), Math.sin(arg), -Math.sin(arg), Math.cos(arg), 0, 0)
        ctx.beginPath()
        ctx.moveTo(0, 0)
        ctx.lineTo(0, -h / 2)
        ctx.lineWidth = 3
        ctx.stroke()
        // ctx.fillRect(w / 2,  0, 10, 10)
        ctx.restore()
    }
    let r = 0, g = 0, b = 0
    setInterval(() => {
        if (deg % 360 == 0) {
            r = Math.floor(Math.random() * 255)
            g = Math.floor(Math.random() * 255)
            b = Math.floor(Math.random() * 255)
        }
        let a = (deg % 360) / 360
        // a = 1
        ctx.strokeStyle = 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')'
        draw()
        deg += 1.5
    }, 16)
</script>
</html>
